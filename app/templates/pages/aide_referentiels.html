{% extends "layouts/base.html" %}
{% from 'components/page_header.html' import page_header %}

{% block title %}Aide - RÃ©fÃ©rentiels{% endblock %}

{% block content %}
{{ page_header(
    title='â“ Aide - Gestion des RÃ©fÃ©rentiels',
    breadcrumbs=[
        {'name': 'Accueil', 'url': url_for('accueil')},
        {'name': 'Administration'},
        {'name': 'RÃ©fÃ©rentiels', 'url': url_for('referentiels_home')},
        {'name': 'Aide'}
    ],
    actions=[
        {'label': 'â† Retour', 'url': url_for('referentiels_home'), 'primary': False}
    ]
) }}

<div class="help-container" style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
    
    <!-- Introduction -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
        <h2 style="color: #92400e; margin-bottom: 1rem;">ğŸ“š SystÃ¨me de Gestion des RÃ©fÃ©rentiels</h2>
        <p style="color: #78350f; line-height: 1.8; font-size: 1.05rem;">
            Les rÃ©fÃ©rentiels constituent la base de donnÃ©es de rÃ©fÃ©rence de l'application. 
            Ils dÃ©finissent la structure organisationnelle (programmes, directions, services) 
            et les classifications (grades, catÃ©gories) utilisÃ©es dans tous les modules.
        </p>
    </div>

    <!-- HiÃ©rarchie organisationnelle -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ¢ Structure HiÃ©rarchique</h3>
        
        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
            <pre style="font-family: monospace; color: #1f2937; margin: 0; font-size: 0.95rem;">
ğŸ“Š <strong>Programme</strong> (Niveau 1)
   â””â”€ ğŸ“ <strong>Direction</strong> (Niveau 2)
      â””â”€ ğŸª <strong>Service</strong> (Niveau 3)
         â””â”€ ğŸ‘¤ <strong>Agents</strong>
            </pre>
        </div>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">Exemple concret :</h4>
        <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; border-left: 4px solid #0ea5e9;">
            <pre style="font-family: monospace; color: #0c4a6e; margin: 0;">
ğŸ“Š <strong>Programme:</strong> ADMIN (Administration GÃ©nÃ©rale)
   â””â”€ ğŸ“ <strong>Direction:</strong> DAAF (Direction des Affaires Administratives et FinanciÃ¨res)
      â””â”€ ğŸª <strong>Service:</strong> SBUD (Service Budget)
         â”œâ”€ ğŸ‘¤ Chef de service: Lassina SORO
         â””â”€ ğŸ‘¤ Agents du service...
            </pre>
        </div>
    </div>

    <!-- GÃ©rer les programmes -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ“Š GÃ©rer les Programmes</h3>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">â• CrÃ©er un programme</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"â• Nouveau Programme"</strong></li>
            <li>Remplir le formulaire :
                <ul>
                    <li><strong>Code :</strong> Identifiant court (ex: ADMIN, EDUC, SANTE)</li>
                    <li><strong>LibellÃ© :</strong> Nom complet du programme</li>
                    <li><strong>Description :</strong> DÃ©tails optionnels</li>
                    <li><strong>Responsable :</strong> Agent responsable du programme (optionnel)</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
        
        <h4 style="color: #4b5563; margin: 1.5rem 0 1rem 0;">âœï¸ Modifier / ğŸ—‘ï¸ Supprimer</h4>
        <p style="color: #374151; line-height: 1.8;">
            Utiliser les actions dans la colonne "Actions" du tableau. 
            La suppression est un <strong>soft delete</strong> : le programme est dÃ©sactivÃ© mais conservÃ© en base.
        </p>
    </div>

    <!-- GÃ©rer les directions -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ“ GÃ©rer les Directions</h3>
        
        <p style="color: #4b5563; margin-bottom: 1rem;">
            Les directions sont rattachÃ©es Ã  un <strong>programme parent</strong>.
        </p>
        
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"â• Nouvelle Direction"</strong></li>
            <li>SÃ©lectionner le <strong>programme de rattachement</strong></li>
            <li>Remplir :
                <ul>
                    <li>Code (ex: DAAF, DRH, DTIC)</li>
                    <li>LibellÃ© (nom complet)</li>
                    <li>Description</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
        
        <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-top: 1rem;">
            <p style="margin: 0; color: #1e40af;">
                <strong>ğŸ’¡ Astuce :</strong> Le filtrage par programme permet de visualiser 
                la structure hiÃ©rarchique et de vÃ©rifier la cohÃ©rence organisationnelle.
            </p>
        </div>
    </div>

    <!-- GÃ©rer les services -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸª GÃ©rer les Services</h3>
        
        <p style="color: #4b5563; margin-bottom: 1rem;">
            Les services sont rattachÃ©s Ã  une <strong>direction parente</strong> et peuvent avoir un <strong>chef de service</strong>.
        </p>
        
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"â• Nouveau Service"</strong></li>
            <li>SÃ©lectionner la <strong>direction de rattachement</strong></li>
            <li>Remplir :
                <ul>
                    <li>Code (ex: SBUD, SCPT, SAPV)</li>
                    <li>LibellÃ© (nom complet)</li>
                    <li>Description</li>
                    <li><strong>Chef de service :</strong> SÃ©lectionner un agent (optionnel)</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
        
        <h4 style="color: #4b5563; margin: 1.5rem 0 1rem 0;">ğŸ‘¤ Attribuer un Chef de Service</h4>
        <p style="color: #374151; line-height: 1.8;">
            Le chef de service peut Ãªtre assignÃ© lors de la crÃ©ation ou modification du service. 
            SÃ©lectionnez un agent dans la liste dÃ©roulante. Seuls les agents actifs sont affichÃ©s.
        </p>
    </div>

    <!-- GÃ©rer les grades -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ–ï¸ GÃ©rer les Grades</h3>
        
        <p style="color: #4b5563; margin-bottom: 1rem;">
            Les grades dÃ©finissent les classifications de la fonction publique.
        </p>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">CatÃ©gories de grades</h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
            <div style="padding: 0.75rem; background: #dbeafe; border-radius: 6px;">
                <strong style="color: #1e40af;">CatÃ©gorie A</strong>
                <p style="margin: 0.25rem 0 0 0; color: #1e3a8a; font-size: 0.9rem;">Cadres supÃ©rieurs</p>
            </div>
            <div style="padding: 0.75rem; background: #d1fae5; border-radius: 6px;">
                <strong style="color: #065f46;">CatÃ©gorie B</strong>
                <p style="margin: 0.25rem 0 0 0; color: #064e3b; font-size: 0.9rem;">Cadres intermÃ©diaires</p>
            </div>
            <div style="padding: 0.75rem; background: #fef3c7; border-radius: 6px;">
                <strong style="color: #92400e;">CatÃ©gorie C</strong>
                <p style="margin: 0.25rem 0 0 0; color: #78350f; font-size: 0.9rem;">Personnel d'exÃ©cution</p>
            </div>
        </div>
        
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"â• Nouveau Grade"</strong></li>
            <li>Remplir :
                <ul>
                    <li>Code (ex: A1, B2, C3)</li>
                    <li>LibellÃ© (nom du grade)</li>
                    <li>CatÃ©gorie (A, B, C, Hors catÃ©gorie)</li>
                    <li>Indices (min/max)</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
    </div>

    <!-- Impact sur les autres modules -->
    <div class="card" style="background: #f0f9ff; border-left: 4px solid #0ea5e9;">
        <h3 style="color: #0369a1; margin-bottom: 1.5rem;">ğŸ”„ Impact sur les Autres Modules</h3>
        
        <p style="color: #0c4a6e; margin-bottom: 1rem;">
            Les rÃ©fÃ©rentiels sont utilisÃ©s dans <strong>tous les modules</strong> de l'application :
        </p>
        
        <ul style="color: #075985; line-height: 2;">
            <li><strong>Personnel :</strong> Affectation des agents (programme, direction, service, grade)</li>
            <li><strong>RH :</strong> Workflows personnalisÃ©s, hiÃ©rarchie de validation</li>
            <li><strong>Budget :</strong> Structure budgÃ©taire, fiches techniques</li>
            <li><strong>Stock :</strong> Affectation des articles et demandes</li>
            <li><strong>Performance :</strong> Objectifs par programme/direction</li>
        </ul>
        
        <div style="background: #fee2e2; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
            <p style="margin: 0; color: #991b1b;">
                <strong>âš ï¸ Attention :</strong> Modifier ou supprimer un rÃ©fÃ©rentiel peut impacter 
                tous les modules. VÃ©rifiez les dÃ©pendances avant toute modification importante.
            </p>
        </div>
    </div>

</div>
{% endblock %}

