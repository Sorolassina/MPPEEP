{% extends "layouts/base.html" %}
{% from 'components/page_header.html' import page_header %}

{% block title %}Aide - Gestion des Stocks{% endblock %}

{% block content %}
{{ page_header(
    title='â“ Aide - Gestion des Stocks',
    breadcrumbs=[
        {'name': 'Accueil', 'url': url_for('accueil')},
        {'name': 'Stock', 'url': url_for('stock_home')},
        {'name': 'Aide'}
    ],
    actions=[
        {'label': 'â† Retour', 'url': url_for('stock_home'), 'primary': False}
    ]
) }}

<div class="help-container" style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
    
    <!-- Introduction -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
        <h2 style="color: #92400e; margin-bottom: 1rem;">ğŸ“¦ SystÃ¨me de Gestion des Stocks</h2>
        <p style="color: #78350f; line-height: 1.8; font-size: 1.05rem;">
            Le module Stock permet de gÃ©rer l'inventaire, les mouvements (entrÃ©es/sorties), 
            les demandes d'approvisionnement et le suivi des fournisseurs.
        </p>
    </div>

    <!-- GÃ©rer les articles -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ“¦ GÃ©rer les Articles</h3>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">â• CrÃ©er un article</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"â• Nouvel Article"</strong></li>
            <li>Remplir :
                <ul>
                    <li><strong>RÃ©fÃ©rence :</strong> Code unique de l'article</li>
                    <li><strong>DÃ©signation :</strong> Nom descriptif</li>
                    <li><strong>CatÃ©gorie :</strong> Fournitures, MatÃ©riel, Consommables, etc.</li>
                    <li><strong>UnitÃ© :</strong> PiÃ¨ce, BoÃ®te, Carton, Litre, etc.</li>
                    <li><strong>Stock :</strong> QuantitÃ© actuelle, stock minimum, stock maximum</li>
                    <li><strong>Prix :</strong> Prix unitaire</li>
                </ul>
            </li>
            <li>Ajouter une photo (optionnel)</li>
            <li>Enregistrer</li>
        </ol>
        
        <div style="background: #fee2e2; padding: 1rem; border-radius: 8px; border-left: 4px solid #dc3545; margin-top: 1rem;">
            <p style="margin: 0; color: #991b1b;">
                <strong>âš ï¸ Stock Minimum :</strong> Lorsqu'un article atteint le stock minimum, 
                une alerte est gÃ©nÃ©rÃ©e automatiquement dans le tableau de bord.
            </p>
        </div>
    </div>

    <!-- Mouvements de stock -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">â†•ï¸ Mouvements de Stock</h3>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">Types de mouvements :</h4>
        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="padding: 1rem; background: #d1fae5; border-left: 4px solid #10b981; border-radius: 8px;">
                <strong style="color: #065f46;">ğŸ“¥ ENTRÃ‰E</strong>
                <p style="color: #064e3b; margin: 0.5rem 0 0 0;">
                    RÃ©ception de marchandises (achat, don, transfert entrant)
                </p>
            </div>
            
            <div style="padding: 1rem; background: #fee2e2; border-left: 4px solid #dc3545; border-radius: 8px;">
                <strong style="color: #991b1b;">ğŸ“¤ SORTIE</strong>
                <p style="color: #7f1d1d; margin: 0.5rem 0 0 0;">
                    Distribution, utilisation, perte, casse
                </p>
            </div>
            
            <div style="padding: 1rem; background: #dbeafe; border-left: 4px solid #3b82f6; border-radius: 8px;">
                <strong style="color: #1e40af;">ğŸ”„ AJUSTEMENT</strong>
                <p style="color: #1e3a8a; margin: 0.5rem 0 0 0;">
                    Correction d'inventaire, rÃ©gularisation
                </p>
            </div>
        </div>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">â• Enregistrer un mouvement</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Aller dans <strong>"Stock â†’ Mouvements"</strong></li>
            <li>Cliquer sur <strong>"â• Nouveau Mouvement"</strong></li>
            <li>SÃ©lectionner :
                <ul>
                    <li>Type de mouvement (EntrÃ©e/Sortie/Ajustement)</li>
                    <li>Article concernÃ©</li>
                    <li>QuantitÃ©</li>
                    <li>Motif/Commentaire</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
        
        <p style="color: #374151; line-height: 1.8; margin-top: 1rem;">
            Le stock est automatiquement mis Ã  jour aprÃ¨s validation du mouvement.
        </p>
    </div>

    <!-- Inventaire -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ“‹ Inventaire</h3>
        
        <p style="color: #4b5563; line-height: 1.8; margin-bottom: 1rem;">
            L'inventaire permet de vÃ©rifier physiquement les stocks et de dÃ©tecter les Ã©carts.
        </p>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">ğŸ”„ RÃ©aliser un inventaire</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Aller dans <strong>"Stock â†’ Inventaires"</strong></li>
            <li>Cliquer sur <strong>"â• Nouvel Inventaire"</strong></li>
            <li>Remplir :
                <ul>
                    <li>Date de l'inventaire</li>
                    <li>Lieu/Magasin</li>
                    <li>Responsable</li>
                </ul>
            </li>
            <li>Scanner/compter les articles physiquement</li>
            <li>Saisir les quantitÃ©s rÃ©elles</li>
            <li>Le systÃ¨me calcule automatiquement les Ã©carts</li>
            <li>Valider l'inventaire</li>
        </ol>
        
        <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b; margin-top: 1rem;">
            <p style="margin: 0; color: #92400e;">
                <strong>âš ï¸ Ã‰carts :</strong> En cas d'Ã©cart important, le systÃ¨me propose de crÃ©er 
                automatiquement un mouvement d'ajustement.
            </p>
        </div>
    </div>

    <!-- NOUVEAUTÃ‰ : Articles PÃ©rissables -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #10b981;">
        <h3 style="color: #065f46; margin-bottom: 1.5rem;">ğŸƒ Articles PÃ©rissables</h3>
        
        <p style="color: #064e3b; line-height: 1.8; margin-bottom: 1rem;">
            Les articles pÃ©rissables (denrÃ©es alimentaires, mÃ©dicaments, produits chimiques) nÃ©cessitent un suivi par lot avec dates de pÃ©remption.
        </p>
        
        <h4 style="color: #065f46; margin-bottom: 1rem;">â• Configurer un article pÃ©rissable</h4>
        <ol style="line-height: 1.8; color: #064e3b;">
            <li>Lors de la crÃ©ation/modification d'un article</li>
            <li>Cocher <strong>"Cet article est pÃ©rissable"</strong></li>
            <li>DÃ©finir le <strong>Seuil d'alerte</strong> : nombre de jours avant pÃ©remption pour dÃ©clencher une alerte (dÃ©faut: 30 jours)</li>
        </ol>
        
        <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-top: 1rem;">
            <p style="color: #1e40af; line-height: 1.8; margin: 0;">
                <strong>ğŸ’¡ Important :</strong> La date de pÃ©remption exacte sera saisie lors de la crÃ©ation de chaque lot, 
                car elle varie selon le numÃ©ro de lot et la date de fabrication.
            </p>
        </div>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">ğŸ“¦ Enregistrer une entrÃ©e d'article pÃ©rissable</h4>
        <ol style="line-height: 1.8; color: #064e3b;">
            <li>Aller dans <strong>"Stock â†’ Mouvements"</strong></li>
            <li>Cliquer sur <strong>"â• Nouveau Mouvement"</strong></li>
            <li>SÃ©lectionner <strong>"Type : ENTRÃ‰E"</strong></li>
            <li>Choisir l'article pÃ©rissable</li>
            <li>Renseigner :
                <ul>
                    <li>QuantitÃ© reÃ§ue</li>
                    <li><strong>NumÃ©ro de lot</strong> (fourni par le fabricant)</li>
                    <li><strong style="color: #dc3545;">Date de pÃ©remption</strong> (obligatoire)</li>
                    <li>Date de fabrication (optionnel)</li>
                    <li>Fournisseur</li>
                </ul>
            </li>
            <li>Enregistrer : le lot sera crÃ©Ã© automatiquement</li>
        </ol>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">ğŸ‘ï¸ Consulter les lots pÃ©rissables</h4>
        <p style="color: #064e3b; line-height: 1.8;">
            La page <strong>"Stock â†’ Lots PÃ©rissables"</strong> permet de <strong>visualiser</strong> tous les lots enregistrÃ©s, 
            leurs dates de pÃ©remption, les alertes et les statistiques. Cette page est en <strong>consultation uniquement</strong>.
        </p>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">ğŸš¨ Alertes automatiques</h4>
        <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b; margin-top: 1rem;">
            <p style="color: #92400e; line-height: 1.8; margin: 0;">
                <strong>âš ï¸ Alertes de pÃ©remption</strong><br>
                Le systÃ¨me affiche automatiquement sur le dashboard :
            </p>
            <ul style="color: #78350f; margin-top: 0.5rem;">
                <li><strong style="color: #f59e0b;">Lots proches de la pÃ©remption</strong> (selon le seuil dÃ©fini)</li>
                <li><strong style="color: #dc3545;">Lots pÃ©rimÃ©s</strong> (date de pÃ©remption dÃ©passÃ©e)</li>
            </ul>
        </div>
    </div>
    
    <!-- NOUVEAUTÃ‰ : Amortissement -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
        <h3 style="color: #92400e; margin-bottom: 1.5rem;">ğŸ’° Amortissement du MatÃ©riel</h3>
        
        <p style="color: #78350f; line-height: 1.8; margin-bottom: 1rem;">
            L'amortissement permet de suivre la dÃ©prÃ©ciation comptable des Ã©quipements, vÃ©hicules et matÃ©riels durables.
        </p>
        
        <h4 style="color: #92400e; margin-bottom: 1rem;">â• Configurer un article amortissable</h4>
        <ol style="line-height: 1.8; color: #78350f;">
            <li>Lors de la crÃ©ation/modification d'un article</li>
            <li>Cocher <strong>"Cet article est amortissable"</strong></li>
            <li>Renseigner :
                <ul>
                    <li><strong>Date d'acquisition</strong></li>
                    <li><strong>Valeur d'acquisition</strong> (prix d'achat)</li>
                    <li><strong>DurÃ©e d'amortissement</strong> (en annÃ©es, ex: 3 ans)</li>
                    <li><strong>MÃ©thode d'amortissement</strong> :
                        <ul>
                            <li><strong>LinÃ©aire</strong> : amortissement constant chaque annÃ©e</li>
                            <li><strong>DÃ©gressif</strong> : amortissement plus important les premiÃ¨res annÃ©es</li>
                        </ul>
                    </li>
                    <li><strong>Taux d'amortissement</strong> (pour mÃ©thode dÃ©gressive)</li>
                    <li><strong>Valeur rÃ©siduelle</strong> (valeur finale aprÃ¨s amortissement complet)</li>
                </ul>
            </li>
        </ol>
        
        <h4 style="color: #92400e; margin-bottom: 1rem; margin-top: 1.5rem;">ğŸ“Š Calculer l'amortissement</h4>
        <ol style="line-height: 1.8; color: #78350f;">
            <li>Aller dans <strong>"Stock â†’ Amortissements"</strong></li>
            <li>SÃ©lectionner l'annÃ©e comptable</li>
            <li>Le systÃ¨me liste les matÃ©riels nÃ©cessitant un calcul</li>
            <li>Cliquer sur <strong>"ğŸ’¾ Calculer"</strong> pour chaque matÃ©riel</li>
            <li>Cliquer sur <strong>"ğŸ“Š Voir plan"</strong> pour afficher le plan d'amortissement complet</li>
        </ol>
        
        <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-top: 1rem;">
            <p style="color: #1e40af; line-height: 1.8; margin: 0;">
                <strong>ğŸ’¡ Exemple : Ordinateur Ã  1 500 000 FCFA</strong><br>
                DurÃ©e : 3 ans | MÃ©thode : LinÃ©aire | Valeur rÃ©siduelle : 150 000 FCFA
            </p>
            <ul style="color: #1e3a8a; margin-top: 0.5rem;">
                <li>Amortissement annuel : (1 500 000 - 150 000) / 3 = <strong>450 000 FCFA/an</strong></li>
                <li>AnnÃ©e 1 : VNC = 1 050 000 FCFA</li>
                <li>AnnÃ©e 2 : VNC = 600 000 FCFA</li>
                <li>AnnÃ©e 3 : VNC = 150 000 FCFA (valeur rÃ©siduelle)</li>
            </ul>
        </div>
    </div>
    
    <!-- Demandes d'approvisionnement -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">ğŸ“ Demandes d'Approvisionnement</h3>
        
        <p style="color: #4b5563; line-height: 1.8; margin-bottom: 1rem;">
            Processus de demande et validation d'achat :
        </p>
        
        <ol style="line-height: 1.8; color: #374151;">
            <li><strong>Agent demandeur :</strong> CrÃ©e une demande avec articles et quantitÃ©s</li>
            <li><strong>Chef de service :</strong> Valide ou rejette</li>
            <li><strong>Responsable stock :</strong> VÃ©rifie la disponibilitÃ©</li>
            <li><strong>DAF :</strong> Validation finale et autorisation d'achat</li>
            <li><strong>Magasinier :</strong> RÃ©ceptionne et enregistre l'entrÃ©e en stock</li>
        </ol>
    </div>

    <!-- Bonnes pratiques -->
    <div class="card" style="background: #f0fdf4; border-left: 4px solid #10b981;">
        <h3 style="color: #065f46; margin-bottom: 1.5rem;">âœ¨ Bonnes Pratiques</h3>
        
        <ul style="color: #064e3b; line-height: 2;">
            <li>âœ… <strong>DÃ©finir des stocks min/max</strong> pour chaque article</li>
            <li>âœ… <strong>Enregistrer tous les mouvements</strong> dÃ¨s qu'ils se produisent</li>
            <li>âœ… <strong>RÃ©aliser des inventaires rÃ©guliers</strong> (mensuel ou trimestriel)</li>
            <li>ğŸƒ <strong>Saisir le NÂ° lot et date de pÃ©remption</strong> lors des entrÃ©es d'articles pÃ©rissables</li>
            <li>ğŸš¨ <strong>Consulter quotidiennement les alertes</strong> de pÃ©remption dans le dashboard</li>
            <li>ğŸ’° <strong>Calculer les amortissements annuellement</strong> pour chaque matÃ©riel amortissable</li>
            <li>ğŸ“Š <strong>VÃ©rifier les plans d'amortissement</strong> avant clÃ´ture comptable</li>
            <li>âœ… <strong>Documenter les motifs</strong> de sortie et ajustement</li>
            <li>âœ… <strong>VÃ©rifier les alertes</strong> de stock faible quotidiennement</li>
            <li>âœ… <strong>Maintenir Ã  jour</strong> les prix unitaires</li>
            <li>âœ… <strong>CatÃ©goriser correctement</strong> les articles pour faciliter les recherches</li>
        </ul>
    </div>

</div>
{% endblock %}

