{% extends "layouts/base.html" %}
{% from 'components/page_header.html' import page_header %}

{% block title %}Aide - Gestion des Stocks{% endblock %}

{% block content %}
{{ page_header(
    title='‚ùì Aide - Gestion des Stocks',
    breadcrumbs=[
        {'name': 'Accueil', 'url': url_for('accueil')},
        {'name': 'Stock', 'url': url_for('stock_home')},
        {'name': 'Aide'}
    ],
    actions=[
        {'label': '‚Üê Retour', 'url': url_for('stock_home'), 'primary': False}
    ]
) }}

<div class="help-container" style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
    
    <!-- Introduction -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
        <h2 style="color: #92400e; margin-bottom: 1rem;">üì¶ Syst√®me de Gestion des Stocks</h2>
        <p style="color: #78350f; line-height: 1.8; font-size: 1.05rem;">
            Le module Stock permet de g√©rer l'inventaire, les mouvements (entr√©es/sorties), 
            les demandes d'approvisionnement et le suivi des fournisseurs.
        </p>
    </div>

    <!-- G√©rer les articles -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">üì¶ G√©rer les Articles</h3>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">‚ûï Cr√©er un article</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Cliquer sur <strong>"‚ûï Nouvel Article"</strong></li>
            <li>Remplir :
                <ul>
                    <li><strong>R√©f√©rence :</strong> Code unique de l'article</li>
                    <li><strong>D√©signation :</strong> Nom descriptif</li>
                    <li><strong>Cat√©gorie :</strong> Fournitures, Mat√©riel, Consommables, etc.</li>
                    <li><strong>Unit√© :</strong> Pi√®ce, Bo√Æte, Carton, Litre, etc.</li>
                    <li><strong>Stock :</strong> Quantit√© actuelle, stock minimum, stock maximum</li>
                    <li><strong>Prix :</strong> Prix unitaire</li>
                </ul>
            </li>
            <li>Ajouter une photo (optionnel)</li>
            <li>Enregistrer</li>
        </ol>
        
        <div style="background: #fee2e2; padding: 1rem; border-radius: 8px; border-left: 4px solid #dc3545; margin-top: 1rem;">
            <p style="margin: 0; color: #991b1b;">
                <strong>‚ö†Ô∏è Stock Minimum :</strong> Lorsqu'un article atteint le stock minimum, 
                une alerte est g√©n√©r√©e automatiquement dans le tableau de bord.
            </p>
        </div>
    </div>

    <!-- Mouvements de stock -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">‚ÜïÔ∏è Mouvements de Stock</h3>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">Types de mouvements :</h4>
        <div style="display: grid; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="padding: 1rem; background: #d1fae5; border-left: 4px solid #10b981; border-radius: 8px;">
                <strong style="color: #065f46;">üì• ENTR√âE</strong>
                <p style="color: #064e3b; margin: 0.5rem 0 0 0;">
                    R√©ception de marchandises (achat, don, transfert entrant)
                </p>
            </div>
            
            <div style="padding: 1rem; background: #fee2e2; border-left: 4px solid #dc3545; border-radius: 8px;">
                <strong style="color: #991b1b;">üì§ SORTIE</strong>
                <p style="color: #7f1d1d; margin: 0.5rem 0 0 0;">
                    Distribution, utilisation, perte, casse
                </p>
            </div>
            
            <div style="padding: 1rem; background: #dbeafe; border-left: 4px solid #3b82f6; border-radius: 8px;">
                <strong style="color: #1e40af;">üîÑ AJUSTEMENT</strong>
                <p style="color: #1e3a8a; margin: 0.5rem 0 0 0;">
                    Correction d'inventaire, r√©gularisation
                </p>
            </div>
        </div>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">‚ûï Enregistrer un mouvement</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Aller dans <strong>"Stock ‚Üí Mouvements"</strong></li>
            <li>Cliquer sur <strong>"‚ûï Nouveau Mouvement"</strong></li>
            <li>S√©lectionner :
                <ul>
                    <li>Type de mouvement (Entr√©e/Sortie/Ajustement)</li>
                    <li>Article concern√©</li>
                    <li>Quantit√©</li>
                    <li>Motif/Commentaire</li>
                </ul>
            </li>
            <li>Enregistrer</li>
        </ol>
        
        <p style="color: #374151; line-height: 1.8; margin-top: 1rem;">
            Le stock est automatiquement mis √† jour apr√®s validation du mouvement.
        </p>
    </div>

    <!-- Inventaire -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">üìã Inventaire</h3>
        
        <p style="color: #4b5563; line-height: 1.8; margin-bottom: 1rem;">
            L'inventaire permet de v√©rifier physiquement les stocks et de d√©tecter les √©carts.
        </p>
        
        <h4 style="color: #4b5563; margin-bottom: 1rem;">üîÑ R√©aliser un inventaire</h4>
        <ol style="line-height: 1.8; color: #374151;">
            <li>Aller dans <strong>"Stock ‚Üí Inventaires"</strong></li>
            <li>Cliquer sur <strong>"‚ûï Nouvel Inventaire"</strong></li>
            <li>Remplir :
                <ul>
                    <li>Date de l'inventaire</li>
                    <li>Lieu/Magasin</li>
                    <li>Responsable</li>
                </ul>
            </li>
            <li>Scanner/compter les articles physiquement</li>
            <li>Saisir les quantit√©s r√©elles</li>
            <li>Le syst√®me calcule automatiquement les √©carts</li>
            <li>Valider l'inventaire</li>
        </ol>
        
        <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b; margin-top: 1rem;">
            <p style="margin: 0; color: #92400e;">
                <strong>‚ö†Ô∏è √âcarts :</strong> En cas d'√©cart important, le syst√®me propose de cr√©er 
                automatiquement un mouvement d'ajustement.
            </p>
        </div>
    </div>

    <!-- NOUVEAUT√â : Articles P√©rissables -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-left: 4px solid #10b981;">
        <h3 style="color: #065f46; margin-bottom: 1.5rem;">üçÉ Articles P√©rissables</h3>
        
        <p style="color: #064e3b; line-height: 1.8; margin-bottom: 1rem;">
            Les articles p√©rissables (denr√©es alimentaires, m√©dicaments, produits chimiques) n√©cessitent un suivi par lot avec dates de p√©remption.
        </p>
        
        <h4 style="color: #065f46; margin-bottom: 1rem;">‚ûï Configurer un article p√©rissable</h4>
        <ol style="line-height: 1.8; color: #064e3b;">
            <li>Lors de la cr√©ation/modification d'un article</li>
            <li>Cocher <strong>"Cet article est p√©rissable"</strong></li>
            <li>D√©finir le <strong>Seuil d'alerte</strong> : nombre de jours avant p√©remption pour d√©clencher une alerte (d√©faut: 30 jours)</li>
        </ol>
        
        <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-top: 1rem;">
            <p style="color: #1e40af; line-height: 1.8; margin: 0;">
                <strong>üí° Important :</strong> La date de p√©remption exacte sera saisie lors de la cr√©ation de chaque lot, 
                car elle varie selon le num√©ro de lot et la date de fabrication.
            </p>
        </div>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">üì¶ Enregistrer une entr√©e d'article p√©rissable</h4>
        <ol style="line-height: 1.8; color: #064e3b;">
            <li>Aller dans <strong>"Stock ‚Üí Mouvements"</strong></li>
            <li>Cliquer sur <strong>"‚ûï Nouveau Mouvement"</strong></li>
            <li>S√©lectionner <strong>"Type : ENTR√âE"</strong></li>
            <li>Choisir l'article p√©rissable</li>
            <li>Renseigner :
                <ul>
                    <li>Quantit√© re√ßue</li>
                    <li><strong>Num√©ro de lot</strong> (fourni par le fabricant)</li>
                    <li><strong style="color: #dc3545;">Date de p√©remption</strong> (obligatoire)</li>
                    <li>Date de fabrication (optionnel)</li>
                    <li>Fournisseur</li>
                </ul>
            </li>
            <li>Enregistrer : le lot sera cr√©√© automatiquement</li>
        </ol>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">üëÅÔ∏è Consulter les lots p√©rissables</h4>
        <p style="color: #064e3b; line-height: 1.8;">
            La page <strong>"Stock ‚Üí Lots P√©rissables"</strong> permet de <strong>visualiser</strong> tous les lots enregistr√©s, 
            leurs dates de p√©remption, les alertes et les statistiques. Cette page est en <strong>consultation uniquement</strong>.
        </p>
        
        <h4 style="color: #065f46; margin-bottom: 1rem; margin-top: 1.5rem;">üö® Alertes automatiques</h4>
        <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; border-left: 4px solid #f59e0b; margin-top: 1rem;">
            <p style="color: #92400e; line-height: 1.8; margin: 0;">
                <strong>‚ö†Ô∏è Alertes de p√©remption</strong><br>
                Le syst√®me affiche automatiquement sur le dashboard :
            </p>
            <ul style="color: #78350f; margin-top: 0.5rem;">
                <li><strong style="color: #f59e0b;">Lots proches de la p√©remption</strong> (selon le seuil d√©fini)</li>
                <li><strong style="color: #dc3545;">Lots p√©rim√©s</strong> (date de p√©remption d√©pass√©e)</li>
            </ul>
        </div>
    </div>
    
    <!-- NOUVEAUT√â : Amortissement -->
    <div class="card" style="margin-bottom: 2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
        <h3 style="color: #92400e; margin-bottom: 1.5rem;">üí∞ Amortissement du Mat√©riel</h3>
        
        <p style="color: #78350f; line-height: 1.8; margin-bottom: 1rem;">
            L'amortissement permet de suivre la d√©pr√©ciation comptable des √©quipements, v√©hicules et mat√©riels durables.
        </p>
        
        <h4 style="color: #92400e; margin-bottom: 1rem;">‚ûï Configurer un article amortissable</h4>
        <ol style="line-height: 1.8; color: #78350f;">
            <li>Lors de la cr√©ation/modification d'un article</li>
            <li>Cocher <strong>"Cet article est amortissable"</strong></li>
            <li>Renseigner :
                <ul>
                    <li><strong>Date d'acquisition</strong></li>
                    <li><strong>Valeur d'acquisition</strong> (prix d'achat)</li>
                    <li><strong>Dur√©e d'amortissement</strong> (en ann√©es, ex: 3 ans)</li>
                    <li><strong>M√©thode d'amortissement</strong> :
                        <ul>
                            <li><strong>Lin√©aire</strong> : amortissement constant chaque ann√©e</li>
                            <li><strong>D√©gressif</strong> : amortissement plus important les premi√®res ann√©es</li>
                        </ul>
                    </li>
                    <li><strong>Taux d'amortissement</strong> (pour m√©thode d√©gressive)</li>
                    <li><strong>Valeur r√©siduelle</strong> (valeur finale apr√®s amortissement complet)</li>
                </ul>
            </li>
        </ol>
        
        <h4 style="color: #92400e; margin-bottom: 1rem; margin-top: 1.5rem;">üìä Calculer l'amortissement</h4>
        <ol style="line-height: 1.8; color: #78350f;">
            <li>Aller dans <strong>"Stock ‚Üí Amortissements"</strong></li>
            <li>S√©lectionner l'ann√©e comptable</li>
            <li>Le syst√®me liste les mat√©riels n√©cessitant un calcul</li>
            <li>Cliquer sur <strong>"üíæ Calculer"</strong> pour chaque mat√©riel</li>
            <li>Cliquer sur <strong>"üìä Voir plan"</strong> pour afficher le plan d'amortissement complet</li>
        </ol>
        
        <div style="background: #dbeafe; padding: 1rem; border-radius: 8px; border-left: 4px solid #3b82f6; margin-top: 1rem;">
            <p style="color: #1e40af; line-height: 1.8; margin: 0;">
                <strong>üí° Exemple : Ordinateur √† 1 500 000 FCFA</strong><br>
                Dur√©e : 3 ans | M√©thode : Lin√©aire | Valeur r√©siduelle : 150 000 FCFA
            </p>
            <ul style="color: #1e3a8a; margin-top: 0.5rem;">
                <li>Amortissement annuel : (1 500 000 - 150 000) / 3 = <strong>450 000 FCFA/an</strong></li>
                <li>Ann√©e 1 : VNC = 1 050 000 FCFA</li>
                <li>Ann√©e 2 : VNC = 600 000 FCFA</li>
                <li>Ann√©e 3 : VNC = 150 000 FCFA (valeur r√©siduelle)</li>
            </ul>
        </div>
    </div>
    
    <!-- Demandes d'approvisionnement -->
    <div class="card" style="margin-bottom: 2rem;">
        <h3 style="color: #1f2937; margin-bottom: 1.5rem;">üìù Demandes d'Approvisionnement</h3>
        
        <p style="color: #4b5563; line-height: 1.8; margin-bottom: 1rem;">
            Processus de demande et validation d'achat :
        </p>
        
        <ol style="line-height: 1.8; color: #374151;">
            <li><strong>Agent demandeur :</strong> Cr√©e une demande avec articles et quantit√©s</li>
            <li><strong>Chef de service :</strong> Valide ou rejette</li>
            <li><strong>Responsable stock :</strong> V√©rifie la disponibilit√©</li>
            <li><strong>DAF :</strong> Validation finale et autorisation d'achat</li>
            <li><strong>Magasinier :</strong> R√©ceptionne et enregistre l'entr√©e en stock</li>
        </ol>
    </div>

    <!-- Bonnes pratiques -->
    <div class="card" style="background: #f0fdf4; border-left: 4px solid #10b981;">
        <h3 style="color: #065f46; margin-bottom: 1.5rem;">‚ú® Bonnes Pratiques</h3>
        
        <ul style="color: #064e3b; line-height: 2;">
            <li>‚úÖ <strong>D√©finir des stocks min/max</strong> pour chaque article</li>
            <li>‚úÖ <strong>Enregistrer tous les mouvements</strong> d√®s qu'ils se produisent</li>
            <li>‚úÖ <strong>R√©aliser des inventaires r√©guliers</strong> (mensuel ou trimestriel)</li>
            <li>üçÉ <strong>Saisir le N¬∞ lot et date de p√©remption</strong> lors des entr√©es d'articles p√©rissables</li>
            <li>üö® <strong>Consulter quotidiennement les alertes</strong> de p√©remption dans le dashboard</li>
            <li>üí∞ <strong>Calculer les amortissements annuellement</strong> pour chaque mat√©riel amortissable</li>
            <li>üìä <strong>V√©rifier les plans d'amortissement</strong> avant cl√¥ture comptable</li>
            <li>‚úÖ <strong>Documenter les motifs</strong> de sortie et ajustement</li>
            <li>‚úÖ <strong>V√©rifier les alertes</strong> de stock faible quotidiennement</li>
            <li>‚úÖ <strong>Maintenir √† jour</strong> les prix unitaires</li>
            <li>‚úÖ <strong>Cat√©goriser correctement</strong> les articles pour faciliter les recherches</li>
        </ul>
    </div>

</div>
{% endblock %}

