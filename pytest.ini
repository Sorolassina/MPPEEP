[pytest]
# Configuration pytest pour MPPEEP Dashboard

# Dossier contenant les tests
testpaths = tests

# Pattern pour découvrir les fichiers de tests
python_files = test_*.py

# Pattern pour découvrir les classes de tests
python_classes = Test*

# Pattern pour découvrir les fonctions de tests
python_functions = test_*

# Options par défaut
addopts =
    # Afficher les détails des assertions
    -v
    # Afficher le résumé des tests
    -ra
    #
    -s
    # Afficher les logs en cas d'échec
    --tb=short
    # Parallélisation (décommenter si pytest-xdist installé)
    -n auto
    # Couverture de code (décommenter si pytest-cov installé)
    --cov=app
    --cov-report=term-missing
    --cov-report=html
    # Rapport HTML (décommenter si pytest-html installé)
    --html=reports/pytest_report.html
    --self-contained-html
    
# Marqueurs personnalisés
markers =
    unit: tests unitaires (fonctions isolées)
    integration: tests d'intégration (API + plusieurs composants)
    functional: tests fonctionnels (workflows complets)
    e2e: tests end-to-end (avec navigateur)
    slow: marque les tests comme lents (> 1 seconde)
    auth: tests liés à l'authentification
    database: tests nécessitant une base de données

# Ignorer les warnings spécifiques
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

